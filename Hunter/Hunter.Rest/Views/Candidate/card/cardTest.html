<div ng-controller="CardTestController as testCtrl">

    <div class="workArea container">
        <div style="margin-bottom: 10px;" class="row workArea-row">
            <div class="col-md-5">
                <input type="text" class="form-control testLink" placeholder="Provide link to test" ng-model="testCtrl.testLink"/>
                <button class="btn btn-primary" ng-click="testCtrl.uploadLink()">Add</button>
            </div>
            <div class="col-md-7">
                <input style="margin-left: 16px;" class="form-control filePath" type="text" readonly placeholder="Pick the file with test"
                       ng-model="testCtrl.fileName"/>
                <span class="file-input btn btn-primary btn-file">
                    Browse… <input type="file" multiple="" ng-file-change="testCtrl.onFileChanged">
                </span>

                <button class="btn btn-primary" ng-click="testCtrl.uploadFile()">Upload</button>
            </div>
        </div>

        <div class="row workArea-row" ng-repeat="test in testCtrl.test.tests | orderBy:'id':true">
            <div class="col-md-3 taskInfo">
                <div>
                    <div ng-show="test.file != null">
                        <h4 class="disableBottomMargins">Test</h4>
                        <ul class="disableBottomMargins">
                            <li class="breakWords">Test: {{test.file.fileName}}</li>
                            <li>Size: 1.2Mb</li>
                            <li>Uploaded: {{test.file.added | date:'dd.MM.yyyy'}}</li>
                        </ul>
                        <a ng-href="/api/file/download/{{test.file.id}}" class="btn btn-default btn-block">Download</a>
                    </div>
                    <div ng-hide="test.file != null">
                        <h4 class="disableBottomMargins">Test</h4>
                        <a class="breakWords" href="{{testCtrl.test.url}}">{{test.url}}</a>
                        <p>Added {{test.added | date:'dd.MM.yyyy'}}</p>
                    </div>
                </div>
            </div>

            <!--Feedbacks-->
            <div class="col-md-9 feedsArea">

                <div class="row">
                    <!--Feedback-->
                    <div class="col-md-10 feedbacks">
                        <!--Votes-->
                        <div>
                            <h4 style="display: inline" class="disableBottomMargins">Feedback</h4>
                            <div style="display: inline-block;">
                                <div class="circleButton btn btn-success"><span class="glyphicon glyphicon-thumbs-up circleButton-icon"></span></div>
                                <div class="circleButton btn btn-danger"><span class="glyphicon glyphicon-thumbs-down circleButton-icon"></span></div>
                            </div>

                            <p class="feedback-addedBy" ng-show="test.feedback.userName != undefined">
                                updated by {{test.feedback.userAlias}} {{test.feedback.date | date:'dd.MM.yyyy'}}
                            </p>
                            <textarea class="form-control feedbackField"
                                      ng-auto-expand
                                      ng-readonly="test.feedbackConfig.fieldReadonly"
                                      ng-model="test.feedback.text"></textarea>
                        </div>
                    </div>
                    <!--Buttons-->
                    <div class="col-md-2 group-btn">
                        <button class="btn btn-primary btn-block" ng-click="testCtrl.feedbackButtonToggle(test)">
                            {{test.feedbackConfig.buttonText}}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>